#!/bin/bash
# Aegis OS Live Environment Setup Script

set -e

echo "Setting up Aegis OS Live Environment..."

# Enable networking
systemctl enable --now NetworkManager 2>/dev/null || true

# Set timezone
ln -sf /usr/share/zoneinfo/UTC /etc/localtime

# Generate locales
echo "en_US.UTF-8 UTF-8" > /etc/locale.gen
locale-gen

# Create aegis user home directory if needed
if [ ! -d /home/aegis ]; then
    mkdir -p /home/aegis
    cp -rT /etc/skel /home/aegis
    chown -R aegis:aegis /home/aegis
fi

# Enable and start display manager for GUI
if command -v lightdm &> /dev/null; then
    systemctl enable lightdm 2>/dev/null || true
    systemctl start lightdm 2>/dev/null || true
fi

echo "Aegis OS Live Environment Ready!"
